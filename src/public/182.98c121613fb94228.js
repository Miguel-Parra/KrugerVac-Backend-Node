"use strict";(self.webpackChunkKrugerVacFrontend=self.webpackChunkKrugerVacFrontend||[]).push([[182],{3182:(w,h,c)=>{c.r(h),c.d(h,{EmpleadoModule:()=>S});var s=c(9808),p=c(3455),a=c(2382),v=c(9023),A=c(5226),d=c.n(A),o=c(7587),_=c(6518),m=c(520),f=c(262),g=c(9646),C=c(4004),Z=c(2340);let b=(()=>{class n{constructor(e){this._httpClient=e,this.baseUrl=Z.N.baseUrl}obtenerVacunas(){const e=(new m.WM).set("x-token",localStorage.getItem("token")||"");return this._httpClient.get(this.baseUrl+"/vacunas",{headers:e}).pipe((0,f.K)(i=>(0,g.of)(i.error.msg)))}agregarVacuna(e){const r=this.baseUrl+"/vacunas/agregar",i={vacuna:e},l=(new m.WM).set("x-token",localStorage.getItem("token")||"");return this._httpClient.post(r,i,{headers:l}).pipe((0,C.U)(u=>u.ok),(0,f.K)(u=>(0,g.of)(u.error.msg)))}obtenerVacunasUsuario(e){const r=(new m.WM).set("x-token",localStorage.getItem("token")||"");return this._httpClient.get(this.baseUrl+`/vacunas/usuario/${e}`,{headers:r}).pipe((0,f.K)(l=>(0,g.of)(l.error.msg)))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(m.eN))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),U=(()=>{class n{constructor(e){this._httpClient=e,this.baseUrl=Z.N.baseUrl}editarInfoAdicional(e,r){const i=this.baseUrl+`/usuarios/actualizarAdicional/${r}`,l=(new m.WM).set("x-token",localStorage.getItem("token")||"");return this._httpClient.post(i,{informacion:e},{headers:l}).pipe((0,f.K)(Y=>(0,g.of)(Y.error.msg)))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(m.eN))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function T(n,t){if(1&n&&(o.TgZ(0,"span",31),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij(" ",e.fechaNacimientoErrorMsg," ")}}function q(n,t){if(1&n&&(o.TgZ(0,"span",31),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij(" ",e.direccionDomicilioErrorMsg," ")}}function I(n,t){if(1&n&&(o.TgZ(0,"span",31),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij(" ",e.telefonoMovilErrorMsg," ")}}function V(n,t){if(1&n&&(o.TgZ(0,"span",31),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij(" ",e.vacunadoErrorMsg," ")}}function x(n,t){if(1&n&&(o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.ALo(5,"date"),o.qZA(),o.TgZ(6,"td"),o._uU(7),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.Oqu(e.nombre),o.xp6(2),o.Oqu(o.xi3(5,3,e.fecha_vacunacion,"YYYY-MM-dd")),o.xp6(3),o.Oqu(e.dosis)}}function y(n,t){if(1&n&&(o.TgZ(0,"option",20),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.Q6J("value",e.id_vacuna),o.xp6(1),o.hij(" ",e.nombre," ")}}function k(n,t){if(1&n&&(o.TgZ(0,"span",21),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij(" ",e.nombreErrorMsg," ")}}function N(n,t){if(1&n&&(o.TgZ(0,"span",21),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij(" ",e.fechaVacunacionErrorMsg," ")}}function E(n,t){if(1&n&&(o.TgZ(0,"span",21),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij(" ",e.dosisErrorMsg," ")}}const J=[{path:"",children:[{path:"principal",component:(()=>{class n{constructor(e,r,i,l,u){this._formBuilder=e,this._authService=r,this._router=i,this._vacunaService=l,this._empleadoService=u,this.usuarioConectado=this._authService.usuario,this.miFormInfoAdicional=this._formBuilder.group({fecha_nacimiento:[null===this.usuarioConectado.informacionCompleta.fecha_nacimiento?"":String(this.usuarioConectado.informacionCompleta.fecha_nacimiento).substring(0,10),[a.kI.required,a.kI.pattern(v.D_)]],direccion_domicilio:[this.usuarioConectado.informacionCompleta.direccion_domicilio,[a.kI.required,a.kI.minLength(15)]],telefono_movil:[this.usuarioConectado.informacionCompleta.telefono_movil,[a.kI.required,a.kI.pattern(v.om)]],vacunado:[String(this.usuarioConectado.informacionCompleta.vacunado),[a.kI.required]]}),this.vacunas=[]}get fechaNacimientoErrorMsg(){var e;const r=null===(e=this.miFormInfoAdicional.get("fecha_nacimiento"))||void 0===e?void 0:e.errors;return(null==r?void 0:r.required)?"La fecha es requerida":(null==r?void 0:r.pattern)?"EL formato debe ser: yyyy-mm-dd":""}get direccionDomicilioErrorMsg(){var e;const r=null===(e=this.miFormInfoAdicional.get("direccion_domicilio"))||void 0===e?void 0:e.errors;return(null==r?void 0:r.required)?"La direcci\xf3n es requerida":(null==r?void 0:r.minlength)?"La direcci\xf3n debe contener al menos 15 caracteres":""}get telefonoMovilErrorMsg(){var e;const r=null===(e=this.miFormInfoAdicional.get("telefono_movil"))||void 0===e?void 0:e.errors;return(null==r?void 0:r.required)?"El tel\xe9fono es requerido":(null==r?void 0:r.pattern)?"El tel\xe9fono movil debe contener 10 n\xfameros":""}get vacunadoErrorMsg(){var e;const r=null===(e=this.miFormInfoAdicional.get("vacunado"))||void 0===e?void 0:e.errors;return(null==r?void 0:r.required)?"Estado requerido":""}ngOnInit(){this._vacunaService.obtenerVacunasUsuario(this.usuarioConectado.id_empleado).subscribe({next:e=>{!0===e.ok?this.vacunas=e.vacunas:d().fire({text:"El usaurio no tiene vacunas registradas",icon:"warning"})}})}salir(){this._authService.salir(),this._router.navigateByUrl("/auth")}actualizarInformacion(){this.miFormInfoAdicional.invalid?this.miFormInfoAdicional.markAllAsTouched():this._empleadoService.editarInfoAdicional(this.miFormInfoAdicional.value,this.usuarioConectado.id_empleado).subscribe({next:e=>{const{ok:r,resp:i}=e;!0===r?(d().fire("\xc9xito","Datos actualizados","success"),this.usuarioConectado={informacionCompleta:i,usuario:i.usuario,id_empleado:i.id_empleado,rol:i.rol}):d().fire("Error",i,"error")}})}validarCampo(e){var r,i;return(null===(r=this.miFormInfoAdicional.get(e))||void 0===r?void 0:r.invalid)&&(null===(i=this.miFormInfoAdicional.controls[e])||void 0===i?void 0:i.touched)}verificarVacunado(e){var r,i;null===(r=this.miFormInfoAdicional.get("vacunado"))||void 0===r||r.setValue(e),"true"===e?0===this.vacunas.length&&this.agregarVacuna():0!==this.vacunas.length&&(d().fire("Error","El usuario tiene registradas vacunas, no puede cambiar el estado a 'no vacunado'","error"),null===(i=this.miFormInfoAdicional.get("vacunado"))||void 0===i||i.setValue("true"))}agregarVacuna(){this._router.navigateByUrl("empleado/agregarVacuna")}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(a.qu),o.Y36(_.e),o.Y36(p.F0),o.Y36(b),o.Y36(U))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-principal"]],decls:81,vars:15,consts:[[1,"row","bg-primary","mt-2"],[1,"col"],[1,"float-start","ml-4"],[1,"btn","btn-outline-light","float-end","mr-4",3,"click"],[1,"pi","pi-arrow-left"],[1,"container"],[1,"text-center","mt-4"],[1,"row","mb-4"],[1,"col-xl-4","col-lg-4","col-md-6","col-sm-6"],[1,"col-form-label"],["disabled","",1,"form-control",3,"value"],[1,"text-center"],[3,"formGroup","keydown.enter"],[1,"row"],[1,"col-xl-4","col-lg-4","col-md-6"],["formControlName","fecha_nacimiento",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["formControlName","direccion_domicilio",1,"form-control"],["formControlName","telefono_movil",1,"form-control"],[1,"form-check"],["formControlName","vacunado","type","radio","value","true","id","radioVacunado",1,"form-check-input",3,"click"],["for","radioVacunado",1,"form-check-label"],["formControlName","vacunado","type","radio","value","false","id","radioNoVacunado",1,"form-check-input",3,"click"],["for","radioNoVacunado",1,"form-check-label"],[1,"btn","btn-outline-primary","float-center",3,"disabled","click"],[1,"table-responsive-lg","mt-5","mb-3","text-center"],[1,"table","align-middle"],[1,"bg-primary"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","mb-3",3,"click"],[1,"form-text","text-danger"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),o._uU(3),o.qZA()(),o.TgZ(4,"div",1)(5,"button",3),o.NdJ("click",function(){return r.salir()}),o._UZ(6,"i",4),o._uU(7," Salir"),o.qZA()()(),o.TgZ(8,"div",5)(9,"h5",6),o._uU(10,"INFORMACI\xd3N PRINCIPAL"),o.qZA(),o._UZ(11,"hr"),o.TgZ(12,"div",7)(13,"div",8)(14,"label",9),o._uU(15," C\xe9dula: "),o.qZA(),o._UZ(16,"input",10),o.qZA(),o.TgZ(17,"div",8)(18,"label",9),o._uU(19," Nombres: "),o.qZA(),o._UZ(20,"input",10),o.ALo(21,"titlecase"),o.qZA(),o.TgZ(22,"div",8)(23,"label",9),o._uU(24," Apellidos: "),o.qZA(),o._UZ(25,"input",10),o.ALo(26,"titlecase"),o.qZA()(),o.TgZ(27,"h5",11),o._uU(28,"INFORMACI\xd3N ADICIONAL"),o.qZA(),o._UZ(29,"hr"),o.TgZ(30,"div",7)(31,"form",12),o.NdJ("keydown.enter",function(l){return l.preventDefault()}),o.TgZ(32,"div",13)(33,"div",14)(34,"label",9),o._uU(35," Fecha de nacimiento: "),o.qZA(),o._UZ(36,"input",15),o.YNc(37,T,2,1,"span",16),o.qZA(),o.TgZ(38,"div",14)(39,"label",9),o._uU(40," Direcci\xf3n de domicilio: "),o.qZA(),o._UZ(41,"input",17),o.YNc(42,q,2,1,"span",16),o.qZA(),o.TgZ(43,"div",14)(44,"label",9),o._uU(45," Telefono m\xf3vil: "),o.qZA(),o._UZ(46,"input",18),o.YNc(47,I,2,1,"span",16),o.qZA(),o.TgZ(48,"div",14)(49,"label",9),o._uU(50," Estado: "),o.qZA(),o.TgZ(51,"div",19)(52,"input",20),o.NdJ("click",function(){return r.verificarVacunado("true")}),o.qZA(),o.TgZ(53,"label",21),o._uU(54," Vacunado "),o.qZA()(),o.TgZ(55,"div",19)(56,"input",22),o.NdJ("click",function(){return r.verificarVacunado("false")}),o.qZA(),o.TgZ(57,"label",23),o._uU(58," No vacunado "),o.qZA()(),o.YNc(59,V,2,1,"span",16),o.qZA()(),o.TgZ(60,"div",11)(61,"button",24),o.NdJ("click",function(){return r.actualizarInformacion()}),o._uU(62,"Actualizar"),o.qZA()()()(),o.TgZ(63,"h5",11),o._uU(64,"VACUNAS"),o.qZA(),o._UZ(65,"hr"),o.TgZ(66,"div",25)(67,"table",26)(68,"thead",27)(69,"tr")(70,"th",28),o._uU(71,"Nombre"),o.qZA(),o.TgZ(72,"th",28),o._uU(73,"Fecha"),o.qZA(),o.TgZ(74,"th",28),o._uU(75,"Dosis"),o.qZA()()(),o.TgZ(76,"tbody"),o.YNc(77,x,8,6,"tr",29),o.qZA()()(),o.TgZ(78,"div",11)(79,"button",30),o.NdJ("click",function(){return r.agregarVacuna()}),o._uU(80,"Agregar Vacuna"),o.qZA()()()),2&e&&(o.xp6(3),o.Oqu(r.usuarioConectado.informacionCompleta.usuario),o.xp6(13),o.Q6J("value",r.usuarioConectado.informacionCompleta.cedula),o.xp6(4),o.s9C("value",o.lcZ(21,11,r.usuarioConectado.informacionCompleta.nombres)),o.xp6(5),o.s9C("value",o.lcZ(26,13,r.usuarioConectado.informacionCompleta.apellidos)),o.xp6(6),o.Q6J("formGroup",r.miFormInfoAdicional),o.xp6(6),o.Q6J("ngIf",r.validarCampo("fecha_nacimiento")),o.xp6(5),o.Q6J("ngIf",r.validarCampo("direccion_domicilio")),o.xp6(5),o.Q6J("ngIf",r.validarCampo("telefono_movil")),o.xp6(12),o.Q6J("ngIf",r.validarCampo("vacunado")),o.xp6(2),o.Q6J("disabled",r.miFormInfoAdicional.invalid),o.xp6(16),o.Q6J("ngForOf",r.vacunas))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,s.O5,a._,s.sg],pipes:[s.rS,s.uU],styles:["#sidebar[_ngcontent-%COMP%]{height:100%;min-height:100vh;min-width:180px}"]}),n})()},{path:"agregarVacuna",component:(()=>{class n{constructor(e,r,i,l,u){this._activatedRoute=e,this._router=r,this._formBuilder=i,this._vacunaService=l,this._authService=u,this.vacunas=[],this.usuarioConectado=this._authService.usuario,this.vacuna={},this.miFormVacuna=this._formBuilder.group({nombre:[1,[a.kI.required]],fecha_vacunacion:["",[a.kI.required,a.kI.pattern(v.D_)]],dosis:["",[a.kI.required,a.kI.pattern(v.Iy)]]})}get nombreErrorMsg(){var e;const r=null===(e=this.miFormVacuna.get("nombre"))||void 0===e?void 0:e.errors;return(null==r?void 0:r.required)?"El nombre de la vacuna es requerido":""}get fechaVacunacionErrorMsg(){var e;const r=null===(e=this.miFormVacuna.get("fecha_vacunacion"))||void 0===e?void 0:e.errors;return(null==r?void 0:r.required)?"La fecha de vacunaci\xf3n es obligatoria":(null==r?void 0:r.pattern)?"La fecha debe tener el siguiente formato: yyyy-mm-dd":""}get dosisErrorMsg(){var e;const r=null===(e=this.miFormVacuna.get("dosis"))||void 0===e?void 0:e.errors;return(null==r?void 0:r.required)?"El n\xfamero de dosis es requerida":(null==r?void 0:r.pattern)?"Debe ingresar solo n\xfameros":""}ngOnInit(){this._vacunaService.obtenerVacunas().subscribe({next:e=>{!0===e.ok?this.vacunas=e.vacunas:(d().fire({text:"Vacunas no encontradas",icon:"warning"}),this._router.navigateByUrl("/empleado"))}})}colocarIcono(){return this.vacuna.id_vacuna?"pi pi-user-edit":"pi pi-user-plus"}agregarVacuna(){this.miFormVacuna.invalid?this.miFormVacuna.markAllAsTouched():this._vacunaService.agregarVacuna(this.miFormVacuna.value).subscribe({next:e=>{!0===e?(d().fire("\xc9xito","Vacuna registrada","success"),this._router.navigateByUrl("/empleado")):d().fire("Error",e,"error")}})}regresar(){this._router.navigateByUrl("empleado")}validarCampo(e){var r,i;return(null===(r=this.miFormVacuna.get(e))||void 0===r?void 0:r.invalid)&&(null===(i=this.miFormVacuna.controls[e])||void 0===i?void 0:i.touched)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(p.gz),o.Y36(p.F0),o.Y36(a.qu),o.Y36(b),o.Y36(_.e))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-vacuna"]],decls:35,vars:10,consts:[[1,"row","bg-primary","mt-2","mb-5"],[1,"mt-3","text-center"],[1,"container"],[1,"row"],[1,"col-sm-12","col-md-12","col-lg-6","text-center"],["src","assets/imagenes/vacuna.png","alt","imagen",2,"width","50%"],[1,"col-sm-12","col-md-12","col-lg-6"],["autocomplete","off",3,"formGroup","submit","keydown.enter"],[1,"col-xl-6","col-sm-12","mb-2"],[1,"form-label"],["formControlName","nombre",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","form-text text-danger",4,"ngIf"],["formControlName","fecha_vacunacion","type","text","placeholder","Ingrese la fecha de vacunaci\xf3n",1,"form-control"],["formControlName","dosis","type","text","placeholder","Ingrese el n\xfamero de dosis",1,"form-control"],[1,"row","mt-3"],[1,"col"],["type","submit",1,"btn","btn-primary","form-control",3,"disabled"],["type","button",1,"btn","btn-info","form-control",3,"click"],[1,"pi","pi-arrow-left"],[3,"value"],[1,"form-text","text-danger"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0)(1,"h2",1),o._uU(2),o.qZA()(),o.TgZ(3,"div",2)(4,"div",3)(5,"div",4),o._UZ(6,"img",5),o.qZA(),o.TgZ(7,"div",6)(8,"form",7),o.NdJ("submit",function(){return r.agregarVacuna()})("keydown.enter",function(l){return l.preventDefault()}),o.TgZ(9,"div",3)(10,"div",8)(11,"label",9),o._uU(12,"Tipo de Vacuna"),o.qZA(),o.TgZ(13,"select",10),o.YNc(14,y,2,2,"option",11),o.qZA(),o.YNc(15,k,2,1,"span",12),o.qZA(),o.TgZ(16,"div",8)(17,"label",9),o._uU(18,"Fecha de vacunaci\xf3n"),o.qZA(),o._UZ(19,"input",13),o.YNc(20,N,2,1,"span",12),o.qZA(),o.TgZ(21,"div",8)(22,"label",9),o._uU(23,"N\xfamero de dosis"),o.qZA(),o._UZ(24,"input",14),o.YNc(25,E,2,1,"span",12),o.qZA()(),o.TgZ(26,"div",15)(27,"div",16)(28,"button",17),o._UZ(29,"i"),o._uU(30),o.qZA()(),o.TgZ(31,"div",16)(32,"button",18),o.NdJ("click",function(){return r.regresar()}),o._UZ(33,"i",19),o._uU(34," Regresar"),o.qZA()()()()()()()),2&e&&(o.xp6(2),o.hij("",r.vacuna.id_vacuna?"Editar":"Registrar"," Informaci\xf3n Vacuna"),o.xp6(6),o.Q6J("formGroup",r.miFormVacuna),o.xp6(6),o.Q6J("ngForOf",r.vacunas),o.xp6(1),o.Q6J("ngIf",r.validarCampo("nombre")),o.xp6(5),o.Q6J("ngIf",r.validarCampo("fecha_vacunacion")),o.xp6(5),o.Q6J("ngIf",r.validarCampo("dosis")),o.xp6(3),o.Q6J("disabled",r.miFormVacuna.invalid),o.xp6(1),o.Tol(r.colocarIcono()),o.xp6(1),o.hij(" ",r.vacuna.id_vacuna?"Actualizar":"Crear",""))},directives:[a._Y,a.JL,a.sg,a.EJ,a.JJ,a.u,s.sg,a.YN,a.Kr,s.O5,a.Fj],encapsulation:2}),n})()},{path:"**",redirectTo:"principal"}]}];let M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[p.Bz.forChild(J)],p.Bz]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[s.ez,M,a.UX]]}),n})()}}]);